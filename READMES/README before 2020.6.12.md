# Autoaim
## RM 2020 Autoaim framework and code backup
### README_before_2020.3.3.md will no longer be displayed.  
### README_before_2020.4.7.md will no longer be displayed.
### README_before_2020.5.10.md will no longer be displayed.
#### Recent changes:
> * 2020.5.11
>> * 编写了一些Adaptive Robust Kalman Filter(ARKF)函数，未完成
> * 2020.5.12
>> * ARKF函数编写完成，并且进行了测试，可以使用（至少能达到Classical KF的水平）
>>> * 存在几个问题：没有量化地分析，只是使用观察这种定性的手段
>>> * 从观察来看，超量的问题小了，但是回跳的问题仍然存在
>>> * ARKF论文设置的开始自适应调节的因子过高，很多时候达不到，虽然不会退化到CKF，但是难以起到自适应调节的作用
>> * 可能解决方案：1. 4 * 4 的扩展CA模型可能导致过大的问题, 看一下退化到 3* 3 CA模型是否可行
>> * 假如等价权不够好，尝试使用IGG III方案给出等价权
>> * 魔法调参？
> * 2020.5.13
>> * 调整一些参数，更改了自适应因子的确定方式，看起来好些了（虽然回跳看起来不可避免？）
>> * 写了一个对一次测试的鼠标时间进行保存的类，用于明天做曲线验证
>> * 尝试了一下使用3*3的CA模型，效果并不好，所以还是沿用4*4的扩展CA模型
> * 2020.5.14
>> * 录制鼠标事件已经完成
>> * 已经进行了曲线验证，并且由曲线发现了一些问题，比如超调以及预测量过大导致下一帧回跳 
![一次曲线验证测试](https://i.loli.net/2020/05/14/3H6LzWqrUCesxy8.png)
> * 2020.5.16
>> * 魔法调参 - 削减了实时性，换取了云台稳定度，不稳定性大幅降低
>> * 从方波测试上来看，超调仍然能达到30度（假设方波幅度为60度）
>> * `下图的error代表的是：预测量与实际量之差值` 
![修正后的曲线测试.png](https://i.loli.net/2020/05/16/9yGjlsY34O8PtJN.png)
> * 2020.5.17
>> * 对ARKF做了一些参数调整，并进行与朴素Kalman滤波器的比较
>> * 从下图可以明显看出ARKF对不稳定以及过度超量进行了修正
![ARKF & CKF Comparison](https://i.loli.net/2020/05/17/lR3Pk92WZyjgSNr.png)
>> * 把ARKF加入了自瞄框架，替代了以前的AnglePre,进行了速度测试，预测平均0.12ms
> * 2020.5.19
>> * 大改了一波AimBase和AimDistance，删掉了单车号追踪，把这个合并到了序列匹配中
>> * 进行了测试，通过
>> * 明天继续优化实现，可以对所有单元进行测速
> * 2020.5.20
>> * 修改了部分实现以及框架，重新测了一下速，原来跑一帧约7.8ms，现在约6.6ms
>> * 测试了ARKF 可能存在切换装甲时的不准问题
> * 2020.5.22
>> * 将装甲板长宽比值限加大，并重新调整了自适应比值函数，理论上可以检测大装甲板（毕竟它的比值就在那里）
>> * 对部分实现进行了优化，整合删除了一些不必要的函数
> * 2020.5.23
>> * 完成了对自己写的所有部分的检查和优化，重新逐帧调了一遍，测定了时间
>> * 准备开始重构(重写)反陀螺八
>> * 还存在的问题:
>>> * 打符模块未嵌入
>>> * 雷达组预测算法模块未嵌入
>>> * 红色装甲板的参数还没调过
>>> * 远距离明暗交替取流下的数字预测？
> * 2020.5.30
>> * 与电控联调，修改了通信协议中的bug
 
